<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<script>
		"use strict";
    
    function calc() {
      document.getElementById("result").innerHTML = getResult(); 
    }     

    function getResult() {
      let area = input.split("\n").map(l => l.split(""));
      let newArea = input.split("\n").map(l => l.split(""));
      
      const time = 5000;
      
      let time1 = 10;
      let min = 0;

      let time2 = 1000000000;
      let counter = 0;

      let part1 = null;
      let part2 = null;

      while (time2 > time) {
        time2 -= 3500;
      }

      while (min < time) {
        ++min;

        for (let y = 0; y < area.length; ++y) {
          for (let x = 0; x < area[y].length; ++x) {
            let adjacents = [area[y][x + 1], area[y][x - 1], 
                  (area[y - 1] || [])[x], (area[y - 1] || [])[x - 1], (area[y - 1] || [])[x + 1], 
                  (area[y + 1] || [])[x], (area[y + 1] || [])[x - 1], (area[y + 1] || [])[x + 1]];

            if (area[y][x] == "." && adjacents.filter(e => e == "|").length >= 3) {
              newArea[y][x] = "|";

            } else if (area[y][x] == "|" && adjacents.filter(e => e == "#").length >= 3) {
              newArea[y][x] = "#";

            } else if (area[y][x] == "#" && adjacents.filter(e => e == "#").length >= 1 &&
                       adjacents.filter(e => e == "|").length >= 1) {              
              newArea[y][x] = "#";

            } else if (area[y][x] == "#") {
              newArea[y][x] = ".";
            }
          }
        }

        newArea.forEach((l, i) => {
          area[i] = [...l];
        });  

        if (min == 10) {
          let trees = area.map(l => l.filter(e => e == "|").join("")).join("").length;
          let lumbs = area.map(l => l.filter(e => e == "#").join("")).join("").length;
          part1 = trees * lumbs;
        }      

        if (min == time2) {
          let trees = area.map(l => l.filter(e => e == "|").join("")).join("").length;
          let lumbs = area.map(l => l.filter(e => e == "#").join("")).join("").length;
          part2 = trees * lumbs;
        }      
      }

      return `${part1}, ${part2}`;
    }

const input = `#...|.|.|....##.##....|.#...|.|.|......#....|#...#
#..#|.#...||#...|.#..#...#......|.|#..#.##....#|#.
.#..##...#|.|..#|....|..#|.|#.#|.......#..#...|#..
.|.|#..|.#....##......#..#.#...|....|#...|#.......
#....|#.#.|..|..#.....#|.#.||.#.|.....#..#..#.....
.#||##..#..|.|....#.|....#.#..|.....#.#|........|.
.|###|#.|..##|#|...#|||.|..|.|.|#|.#.#|.#...#.|.##
..||#..##.||..|...|..|.||.|#...|..|..#....###.#...
..|......##.....#.###......#.#.......|...|.#|...#|
#..|...|.|#|.|....|#.......|.#.....#|.#.....#..#.#
.#.|..#..#|##..|||..##............#..|..#..|...|.#
.##.#|....|..#..|.#.|....|.||#...|..#||......|#...
.....#....#.#.#.#.||.....#.##|..#...#.|......#....
##.#|.#...#.|..|.|....#|#.....#.|.###|#....#|||...
......|..#......#..|...|..#|##..#|.......||.|....|
..#......#.|.|#....##.##.#.|.|..|##..###....#||.|#
.#|.....#...#..#.||.#||.##...||....|.......|#...##
.......||..|#.|##...#.|.#..|..|.#.|####|.||...|#|.
#...#.#..|##..|#..|.#.|#.|##..|..|#....#.|.....#..
|....#..#.....|..##..#..|.|#..||#|#...||..#|..|...
........##......|......|......||.......##.|#.||..|
|..#.||.#.#..#..|||....|#|..|.#|...|..|.#.||.|.|.|
.#...|..|.|#.......|#.|......|...#|||....#..|...|#
...###|...#..|..#.|...|#|.....##.....|.##.||.|.##|
#..##.|.||#.#....#|.....|#..||...#.||.##|.#..|..|.
|....|#.....|...#..|..|..#..#|........||..#.|.....
..#......|..#....#.|....#.|###|.##|.|...#.#...||..
..#.|#....|...#||.|.#...#..#...#..#.|.#|.||..|#..|
....|.|#..|...||..||#.|..#||.|#..#.#....#.|.....#|
#|.|..|..#......|#|||.##.#......#.|#..#.|.##.#|..#
..#|......##.|.#...|.#...#....#.###|#......|......
..#.#.#|...#|....|...#.##...##...#..#|..|#.|###...
|||.#..###.|......|..#.....#...|#.|.|...#...#|..#|
##...#.#|#.|....||....|.....#|....#....|..|....#.#
.........###.#.#..##..|##..#|...#...|...#|###.|..|
.|#.........##.....#.##.|#.#....#....#|....#....#.
.|....#...#||.|.......|.#..#.|..|#...#|.....|...#.
.|#..|||....#..|#|.|.#.||..|.#|.#|#|||.|#||...#.#.
#.#|.|.#...#.#.|||..|...#..#.##....#.#.#|.||....##
.|.|....##..|#|.#...|#.|.|...#..#|#....|#.|.##.##.
...#....#.....#..#...#..#.|#..#.|#.|..#..#.....|..
#...#..|..###|....#.|...##|...#|...#.#....##...#.#
.#.##..#.#.......................|..#|..##.|.|....
|..#|#..|#....#...#....|..##..#||#..#.#.#.|#|.||##
#.#...#.#...##.||...||....#...##|#|....|||#..|.|.|
....#....|.|.....#|#...#..#|#....|#.|.#|.|..#....|
|#.......||.#.|..|......##.||.....||.|..|....||#..
..|#.....|...##.##..#|##|#....####..#|.......#.|..
||#.#.|.##..#.|....#.||###..####||.#||...##.#..#|#
.|....#.....#.....##.#..|#...|||.|....|#..|#|...#.`; 
	</script>
</head>
<body onload="calc()">
  <div id="result"></div>  
</body>
</html>